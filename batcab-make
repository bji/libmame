#!/bin/sh

# To build mame as a library, use:
# ./batcab-make libmame

# You may also want to do:
# DEBUG=1 SYMBOLS=1 SUBTARGET=tiny ./batcab-make libmame
# The above will build a much smaller version of libmame with many fewer
# romsets supported but builds *alot* faster, which makes it good for testing.
# Also the above builds for debug.

# Finally you will probably be interested in the test program:
# DEBUG=1 SYMBOLS=1 SUBTARGET=tiny ./batcab-make libmame-test

if [ -z "$CONCURRENCY" ]; then
	CONCURRENCY=`cat /proc/cpuinfo | grep ^processor | wc -l`
	if [ -z "$CONCURRENCY" -o "$CONCURRENCY" = 0 ]; then
		CONCURRENCY=1
	else
		CONCURRENCY=$((CONCURRENCY*2))
	fi
fi

OSD=libmame make -j$((CONCURRENCY)) -C `dirname $0` "$@"
